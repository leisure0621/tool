<h1>目錄</h1>

1. [申請 GitHub Application 授權](#s1)
2. [添加 tbfed-pagefooter 插件](#s2)

---

# 01. 申請 GitHub Application 授權<span id="s1"/>

- 進入[官網](https://docs.github.com/en/rest/guides/basics-of-authentication)可以看見並建立身分驗證

<img src="./image/03.dio.svg"/>

- 點選 [register your application](https://github.com/settings/applications/new) 後開始進入此頁面，此範例中輸入的是 github-pages 的網域，可自行調整

<img src="./image/01.dio.svg"/>

- 確定了後可在頁面中取得 <u>Client ID</u>，此時也同時申請取得 <u>Client secrets</u> (這個步驟需輸入 github 密碼)，需要注意的事情是 Client secrets 會隨著離開頁面而隱藏，所以需要自行將 Client secrets 紀錄
  - Client ID : ce993419c6916ba9f19d
  - Client secrets : f92da1907d68544bd53d0143740372616f29333b

<img src="./image/02.dio.svg"/>

- 如果未來還想要調整的話可以進入 https://github.com/settings/developers 頁面進行修改

<img src="./image/04.dio.svg"/>

# 02. 添加 tbfed-pagefooter 插件<span id="s2"/>
> 添加 tbfed-pagefooter 的主要目的為讓留言的組件可以用 js 的方式引用在所有頁面中而非手動添加

- 在 book.json 中新增以下字段

```json
{
  "plugins": [
    "tbfed-pagefooter"
  ],
  "pluginsConfig": {
    "tbfed-pagefooter": {
      "copyright": "Copyright ©Leisure",
      "modify_label": "更新時間：",
      "modify_format": "YYYY-MM-DD HH:mm:ss"
    }
  }
}
```

- 執行 `gitbook install` 安裝 `book.json` 中設定的插件

<img src="./image/05.dio.svg"/>

- 找到插件位置 `{...}\node_modules\gitbook-plugin-tbfed-pagefooter\index.js` 並在 hooks 中添加以下字段

```js
      str +=
        '<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">' +
        '<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>' +
        '<div id="gitalk-container"></div>' +
        '<script>' +
        'var gitalk = new Gitalk({' +
        '  "clientID": "ce993419c6916ba9f19d",' + // 改成自己的 clientID
        '  "clientSecret": "f92da1907d68544bd53d0143740372616f29333b",' + // 改成自己的 clientSecret
        '  "repo": "leisure0621.github.io",' +    // 改成自己的網域
        '  "owner": "leisure0621",' +             // 改成自己的使用者名稱
        '  "admin": ["leisure0621"],' +           // 改成自己的使用者名稱
        '  "id": window.location.pathname,' + 
        '  "distractionFreeMode": false' +
        '});' +
        'gitalk.render("gitalk-container"); ' +
        '</script>';
```

---

- [雪之梦技术驿站](https://www.cnblogs.com/snowdreams1006/p/10662585.html)
- [tbfed-pagefooter](https://jiangminggithub.github.io/gitbook/chapter-plugins/18-tbfed-pagefooter.html)